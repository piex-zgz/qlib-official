
# å ä½1

## å ä½2

### 1. ä¸ºä»€ä¹ˆè¦å‡ç»´æˆ Agentï¼Ÿ

çœ‹çœ‹æˆ‘ä»¬åˆšæ‰èµ°è¿‡çš„è·¯ï¼Œä½ å°±æ˜ç™½äº†ï¼š

* **é˜¶æ®µä¸€ (Pipeline / å·¥ä½œæµ)**ï¼š
* é€»è¾‘ï¼š`æ–°é—»è¿›æ¥` -> `LLM æ‰“åˆ†` -> `ä¸‹å•`ã€‚
* **è‡´å‘½ç¼ºé™·**ï¼šå®ƒæ˜¯**å•å‘**çš„ã€‚å®ƒåƒä¸€ä¸ªåªä¼šè¯»ä¹¦å‘†å­ï¼Œçœ‹åˆ°ä¹¦ä¸Šå†™â€œåˆ©å¥½â€ï¼Œå°±å»ä¹°ï¼Œæ ¹æœ¬ä¸ç®¡å¤–é¢æ˜¯ä¸æ˜¯å·²ç»æ´ªæ°´æ»”å¤©ï¼ˆè‚¡ä»·å·²ç»åœ¨é«˜ä½ï¼‰ã€‚

* **é˜¶æ®µäºŒ (Agent / æ™ºèƒ½ä½“)**ï¼š
* é€»è¾‘ï¼š`æ–°é—»è¿›æ¥` -> `LLM æ€è€ƒ` -> **`ä¸»åŠ¨æŸ¥æ•°æ®(è°ƒç”¨å·¥å…·)`** -> `å‘ç°è‚¡ä»·å¤ªé«˜` -> `ä¿®æ­£å†³ç­–` -> `ä¸ä¸‹å•`ã€‚
* **æ ¸å¿ƒä¼˜åŠ¿**ï¼šå®ƒæœ‰**â€œæ‰‹â€ (Tools)** å’Œ **â€œè„‘å­â€ (Planning)**ã€‚å®ƒä¸ä»…ä»…æ˜¯â€œå¤„ç†æ–‡æœ¬â€ï¼Œå®ƒæ˜¯åœ¨**â€œåšç ”ç©¶â€**ã€‚

### 2. æˆ‘ä»¬è¿™ä¸ª Agent çš„â€œè§£å‰–å›¾â€

æˆ‘ä»¬è¦æ„å»ºçš„è¿™ä¸ª **Deep Research Agent**ï¼ŒåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š

#### A. å¤§è„‘ (Brain) - DeepSeek/GPT-4

* **èŒè´£**ï¼šè´Ÿè´£æ¨ç†ã€è§„åˆ’ã€åšæœ€ç»ˆå†³å®šã€‚
* **æŒ‡ä»¤**ï¼šâ€œæˆ‘çœ‹åˆ°è¿™ä¸ªæ–°é—»äº†ï¼Œä½†æˆ‘ä¸æ•¢ä¿¡ï¼Œæˆ‘è¦å»æŸ¥æŸ¥æ•°æ®ã€‚â€

#### B. å·¥å…·ç®± (Tools) - å®ƒçš„â€œæ‰‹â€å’Œâ€œçœ¼â€

è¿™æ‰æ˜¯ Agent çš„çµé­‚ã€‚æˆ‘ä»¬éœ€è¦ç»™ LLM æŒ‚è½½ä»¥ä¸‹ Python å‡½æ•°ï¼ˆToolsï¼‰ï¼š

1. **`get_market_snapshot(code)`**: è°ƒç”¨ Akshareï¼Œçœ‹ç°åœ¨çš„ä»·æ ¼ã€æ¶¨å¹…ã€‚
2. **`get_technical_indicators(code)`**: æŸ¥ RSIã€å‡çº¿ä½ç½®ï¼ˆåˆ¤æ–­æ˜¯é«˜ä½è¿˜æ˜¯ä½ä½ï¼‰ã€‚
3. **`get_valuation(code)`**: æŸ¥ PE/PBï¼ˆåˆ¤æ–­è´µä¸è´µï¼‰ã€‚
4. **`search_sector_constituents(sector_name)`**: æŸ¥â€œå…‰é€šä¿¡â€åˆ°åº•åŒ…å«å“ªäº›è‚¡ç¥¨ã€‚

#### C. å·¥ä½œæµ (Workflow) - æ€è€ƒçš„æ­¥éª¤

1. **æ„ŸçŸ¥ (Perception)**: æ¥æ”¶æ–°é—»ï¼ˆLLM è¯»å–ï¼‰ã€‚
2. **è§„åˆ’ (Planning)**: æå–å…³é”®è¯ï¼Œå†³å®šè¦æŸ¥å“ªåªè‚¡ç¥¨ã€‚
3. **è¡ŒåŠ¨ (Action)**: æ‰§è¡Œ `akshare` æŸ¥è¯¢ä»£ç ã€‚
4. **åæ€ (Reflection)**: å¯¹æ¯”æ–°é—»å’Œæ•°æ®ã€‚æ–°é—»è¯´åˆ©å¥½ï¼Œæ•°æ®è¯´è·Œåœ -> åˆ¤å®šä¸ºâ€œåˆ©å¥½å‡ºå°½â€æˆ–â€œä¸»åŠ›å‡ºè´§â€ã€‚

---

### 3. Agent ä¼ªä»£ç æ¶æ„

æˆ‘ä»¬ä¸éœ€è¦å¤æ‚çš„ LangChainï¼ˆé‚£ä¸ªå¤ªé‡äº†ï¼‰ï¼Œæˆ‘ä»¬ç”¨æœ€çº¯ç²¹çš„ Python å†™ä¸€ä¸ª **Lightweight Agent**ã€‚

ä½ å¯ä»¥æŠŠè¿™ä¸ªç»“æ„çœ‹ä½œæˆ‘ä»¬æ¥ä¸‹æ¥çš„**å·¥ç¨‹è“å›¾**ï¼š

```python
class FinancialAgent:
    def __init__(self):
        self.llm = DeepSeekAPI()
        self.tools = AkshareToolbox() # æˆ‘ä»¬çš„å·¥å…·ç®±

    def run(self, news_text):
        # Step 1: æ€è€ƒ (Thinking)
        # LLM åˆ†ææ–°é—»ï¼Œæå–å‡ºå®ƒæƒ³æŸ¥çš„æ¿å—/è‚¡ç¥¨
        plan = self.llm.think(f"åˆ†æè¿™æ¡æ–°é—»ï¼Œå‘Šè¯‰æˆ‘è¯¥æŸ¥è°ï¼Ÿ\næ–°é—»: {news_text}")
        # è¾“å‡º: {"target": "å·¥ç¨‹æœºæ¢°", "stock": "600031"}

        # Step 2: è¡ŒåŠ¨ (Acting) - è°ƒç”¨å·¥å…·
        print(f"ğŸ•µï¸ Agent æ­£åœ¨è°ƒæŸ¥: {plan['stock']}...")
        market_data = self.tools.get_price_volume(plan['stock'])
        valuation = self.tools.get_pe_pb(plan['stock'])
        
        # Step 3: ç»¼åˆç ”åˆ¤ (Reasoning)
        # æŠŠæŸ¥åˆ°çš„æ•°æ®å–‚å›ç»™ LLM
        final_decision = self.llm.decide(
            news=news_text,
            data=market_data,
            valuation=valuation,
            prompt="ç°åœ¨ï¼ŒåŸºäºæ–°é—»å’Œå®¢è§‚æ•°æ®ï¼Œå‘Šè¯‰æˆ‘æ€ä¹ˆåšï¼Ÿ"
        )

        return final_decision

```

### 4. ä¸‹ä¸€æ­¥ï¼šä»å“ªé‡Œå¼€å§‹ï¼Ÿ

æ—¢ç„¶ç¡®å®šè¦åš Agentï¼Œæˆ‘ä»¬å°±ä¸èƒ½åªç›¯ç€æ–°é—»æ¸…æ´—äº†ã€‚æˆ‘ä»¬éœ€è¦å…ˆæŠŠ **â€œå·¥å…·ç®±â€ (Tools)** é€ å¥½ã€‚

**ä½ çš„ä»»åŠ¡æ¸…å•ï¼ˆRoadmapï¼‰ï¼š**

1. **æ„å»º Akshare å·¥å…·ç±»**ï¼š

* å†™ä¸€ä¸ª `MarketDataTool` ç±»ã€‚
* å®ç° `get_current_price(code)`ã€‚
* å®ç° `get_history_kline(code)` (ä¸ºäº†ç®— RSI)ã€‚

1. **æ„å»ºæ˜ å°„å·¥å…·**ï¼š

* å®ç° `get_stocks_by_concept(concept_name)`ã€‚
* æ¯”å¦‚è¾“å…¥â€œSoraæ¦‚å¿µâ€ï¼Œå®ƒèƒ½è‡ªåŠ¨é€šè¿‡ Akshare æŸ¥åˆ°ä¸‡å…´ç§‘æŠ€ã€å› èµ›é›†å›¢ã€‚

1. **ç»„è£… Agent**ï¼š

* æŠŠæ–°é—»æµã€å·¥å…·ç±»ã€LLM ä¸²èµ·æ¥ã€‚

**ä½ è§‰å¾—æˆ‘ä»¬æ˜¯å…ˆæå®šâ€œæŸ¥è¡Œæƒ…â€çš„å·¥å…·ï¼ˆAkshareå¯¹æ¥ï¼‰ï¼Œè¿˜æ˜¯å…ˆæå®šâ€œæŸ¥æ¿å—â€çš„å·¥å…·ï¼ˆæ¦‚å¿µè‚¡æ˜ å°„ï¼‰ï¼Ÿ**
(æˆ‘å»ºè®®å…ˆæå®š**æ¦‚å¿µè‚¡æ˜ å°„**ï¼Œå› ä¸º LLM åªèƒ½è¯»æ‡‚â€œæ¿å—â€ï¼Œä¸çŸ¥é“å…·ä½“ä»£ç ï¼Œè¿™ä¸€æ­¥æ˜¯æœ€å¤§çš„æ–­å±‚ã€‚)
